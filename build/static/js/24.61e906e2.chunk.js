(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[24],{1102:function(e,n,t){"use strict";t.r(n);var a=t(1),c=t.n(a),s=t(21),r=t(20),i=t(732),o=t(17),d=Object(o.jsx)("div",{className:"pt-3 text-center",children:Object(o.jsx)("div",{className:"sk-spinner sk-spinner-pulse"})}),l=function(e){return Object(o.jsx)("main",{className:"c-main",children:Object(o.jsx)(i.l,{fluid:!0,children:Object(o.jsx)(a.Suspense,{fallback:d,children:Object(o.jsxs)(r.d,{children:[e.routes.map((function(e,n){return e.component&&Object(o.jsx)(r.b,{path:e.path,exact:e.exact,name:e.name,render:function(n){return Object(o.jsx)(i.r,{children:Object(o.jsx)(e.component,Object(s.a)({},n))})}},n)})),Object(o.jsx)(r.a,{to:"/404"})]})})})})},u=c.a.memo(l),m=function(){return Object(o.jsxs)(i.s,{fixed:!1,children:[Object(o.jsxs)("div",{children:[Object(o.jsx)("a",{href:"https://coreui.io",target:"_blank",rel:"noopener noreferrer",children:"CoreUI"}),Object(o.jsx)("span",{className:"ml-1",children:"\xa9 2020 creativeLabs."})]}),Object(o.jsxs)("div",{className:"mfs-auto",children:[Object(o.jsx)("span",{className:"mr-1",children:"Powered by"}),Object(o.jsx)("a",{href:"https://coreui.io/react",target:"_blank",rel:"noopener noreferrer",children:"CoreUI for React"})]})]})},b=c.a.memo(m),p=t(185),h=t(781),j=t(22),f=c.a.lazy((function(){return t.e(26).then(t.bind(null,1091))})),O=c.a.lazy((function(){return Promise.all([t.e(0),t.e(1),t.e(3),t.e(5),t.e(19)]).then(t.bind(null,1092))})),v=c.a.lazy((function(){return Promise.all([t.e(0),t.e(1),t.e(2),t.e(3),t.e(21)]).then(t.bind(null,1093))})),g=c.a.lazy((function(){return Promise.all([t.e(0),t.e(1),t.e(2),t.e(3),t.e(20)]).then(t.bind(null,1106))})),x=c.a.lazy((function(){return Promise.all([t.e(0),t.e(1),t.e(3),t.e(5),t.e(18)]).then(t.bind(null,1094))})),N=c.a.lazy((function(){return Promise.all([t.e(0),t.e(1),t.e(2),t.e(3),t.e(22)]).then(t.bind(null,1095))})),_=c.a.lazy((function(){return Promise.all([t.e(0),t.e(1),t.e(2),t.e(3),t.e(16)]).then(t.bind(null,1096))})),S=c.a.lazy((function(){return Promise.all([t.e(0),t.e(1),t.e(2),t.e(3),t.e(15)]).then(t.bind(null,1101))})),C=c.a.lazy((function(){return Promise.all([t.e(0),t.e(1),t.e(2),t.e(3),t.e(17)]).then(t.bind(null,1103))})),I=c.a.lazy((function(){return Promise.all([t.e(23),t.e(25)]).then(t.bind(null,1097))})),y=c.a.lazy((function(){return Promise.all([t.e(0),t.e(1),t.e(2),t.e(3),t.e(10)]).then(t.bind(null,1098))})),w=c.a.lazy((function(){return Promise.all([t.e(0),t.e(1),t.e(2),t.e(3),t.e(11)]).then(t.bind(null,1099))})),k=[{path:"/",exact:!0,component:f,name:"Home"},{path:"/dashboard",name:"Dashboard",component:f,permission:[j.d.ADMIN,j.d.AGENCY,j.d.HOST]},{path:"/requests",name:"Requests",component:O,permission:[j.d.AGENCY,j.d.HOST],exact:!0},{path:"/requests/create",name:"Create Request",component:v,permission:[j.d.AGENCY],exact:!0},{path:"/requests/:id",name:"Request Detail",component:g,permission:[j.d.AGENCY,j.d.HOST],exact:!0},{path:"/contracts",name:"Contracts",component:x,permission:[j.d.AGENCY,j.d.HOST],exact:!0},{path:"/contracts/:id",name:"Contract Detail",component:N,permission:[j.d.AGENCY,j.d.HOST],exact:!0},{path:"/cars",name:"Cars",component:_,permission:[j.d.HOST],exact:!0},{path:"/drivers",name:"Drivers",component:S,permission:[j.d.HOST],exact:!0},{path:"/host-details",name:"Host Details",component:C,permission:[j.d.HOST],exact:!0},{path:"/profile",name:"Profile",component:I,permission:[j.d.AGENCY,j.d.HOST],exact:!0},{path:"/transactions/requests",name:"Requests' Transaction",component:y,permission:[j.d.ADMIN],exact:!0},{path:"/transactions/drivers",name:"Drivers' Transaction",component:w,permission:[j.d.ADMIN],exact:!0}],A=function(){var e=Object(p.b)(),n=Object(p.c)((function(e){return e.changeState.sidebarShow}));return Object(o.jsxs)(i.t,{withSubheader:!0,children:[Object(o.jsx)(i.Q,{inHeader:!0,className:"ml-md-3 d-lg-none",onClick:function(){var t=!![!1,"responsive"].includes(n)||"responsive";e({type:"set",sidebarShow:t})}}),Object(o.jsx)(i.Q,{inHeader:!0,className:"ml-3 d-md-down-none",onClick:function(){var t=![!0,"responsive"].includes(n)&&"responsive";e({type:"set",sidebarShow:t})}}),Object(o.jsx)(i.u,{className:"mx-auto d-lg-none",to:"/",children:Object(o.jsx)(h.a,{name:"logo",height:"48",alt:"Logo"})}),Object(o.jsx)(i.v,{className:"d-md-down-none mr-auto",children:Object(o.jsx)(i.w,{className:"px-3",children:Object(o.jsx)(i.x,{to:"/dashboard",children:"Dashboard"})})}),Object(o.jsxs)(i.v,{className:"px-3",children:[Object(o.jsx)(D,{}),Object(o.jsx)(T,{})]}),Object(o.jsx)(i.P,{className:"px-3 justify-content-between",children:Object(o.jsx)(i.d,{className:"border-0 c-subheader-nav m-0 px-0 px-md-3",routes:k})})]})},H=t(184),E=t(851),T=Object(H.b)()((function(e){var n=e.t,t=Object(p.c)((function(e){return e.user})),a=Object(r.g)(),c=Object(p.b)();return Object(o.jsxs)(i.n,{inNav:!0,className:"c-header-nav-items mx-2",direction:"down",children:[Object(o.jsx)(i.q,{className:"c-header-nav-link",caret:!1,children:Object(o.jsx)("div",{className:"c-avatar",children:Object(o.jsx)(i.y,{src:"avatars/".concat(t.data.avatar),className:"c-avatar-img"})})}),Object(o.jsxs)(i.p,{className:"pt-0",placement:"bottom-end",children:[Object(o.jsxs)(i.o,{to:"/profile",children:[Object(o.jsx)(h.a,{name:"cil-user",className:"mfe-2"})," ",n("Profile")]}),Object(o.jsx)(i.o,{divider:!0}),Object(o.jsxs)(i.o,{onClick:function(){return function(){var e=Object(E.c)();c(e),a.push("/login")}()},children:[Object(o.jsx)(h.a,{name:"cil-account-logout",className:"mfe-2"}),n("Logout")]})]})]})})),G=t(418),D=Object(H.b)()((function(e){var n=e.t,t=Object(p.b)(),a=Object(p.c)((function(e){return e.user})),c=function(e){t(Object(E.a)(e));var n=window.localStorage.getItem("".concat("ddsb","_user"));(n=JSON.parse(n)).language=e,window.localStorage.setItem("".concat("ddsb","_user"),JSON.stringify(n)),G.a.changeLanguage(e)};return Object(o.jsxs)(i.n,{inNav:!0,className:"c-header-nav-item mx-2",direction:"down",children:[Object(o.jsx)(i.q,{className:"c-header-nav-link",caret:!1,children:a&&"vi"===a.data.language?Object(o.jsx)(h.a,{name:"cif-vn"}):a&&"en"===a.data.language?Object(o.jsx)(h.a,{name:"cif-us"}):null}),Object(o.jsxs)(i.p,{className:"pt-0",placement:"bottom-end",children:[Object(o.jsx)(i.o,{onClick:function(){return c("vi")},children:Object(o.jsxs)("div",{children:[Object(o.jsx)(h.a,{name:"cif-vn"})," \xa0 ",n("Vietnamese")]})}),Object(o.jsx)(i.o,{onClick:function(){return c("en")},children:Object(o.jsxs)("div",{children:[Object(o.jsx)(h.a,{name:"cif-us"})," \xa0 ",n("English")]})})]})]})})),q=function(e){for(var n=e.navigation,t=e.t,a=(e.tReady,Object(p.b)()),c=Object(p.c)((function(e){return e.changeState.sidebarShow})),s=0;s<n.length;s++)if(n[s]._children){n[s].name&&(n[s].name=t(n[s].name));for(var r=0;r<n[s]._children.length;r++)n[s]._children[r].name?n[s]._children[r].name=t(n[s]._children[r].name):n[s]._children[r]=t(n[s]._children[r])}else n[s].name=t(n[s].name);return Object(o.jsxs)(i.H,{show:c,onShowChange:function(e){return a({type:"set",sidebarShow:e})},children:[Object(o.jsxs)(i.I,{className:"d-md-down-none",to:"/",children:[Object(o.jsx)(h.a,{className:"c-sidebar-brand-full",name:"logo-negative",height:35}),Object(o.jsx)(h.a,{className:"c-sidebar-brand-minimized",name:"sygnet",height:35})]}),Object(o.jsx)(i.K,{children:Object(o.jsx)(i.m,{items:n,components:{CSidebarNavDivider:i.L,CSidebarNavDropdown:i.M,CSidebarNavItem:i.N,CSidebarNavTitle:i.O}})}),Object(o.jsx)(i.J,{className:"c-d-md-down-none"})]})},L=Object(H.b)()(c.a.memo(q)),P=t(736),z=[{_tag:"CSidebarNavItem",name:"Dashboard",to:"/dashboard",icon:Object(o.jsx)(h.a,{name:"cil-speedometer",customClasses:"c-sidebar-nav-icon"}),badge:{color:"info",text:"NEW"}},{_tag:"CSidebarNavTitle",_children:["Host services"],permission:[j.d.HOST]},{_tag:"CSidebarNavItem",name:"Host's Cars",icon:"cil-car-alt",permission:[j.d.HOST],to:"/cars"},{_tag:"CSidebarNavItem",name:"Host's Drivers",icon:"cil-user",permission:[j.d.HOST],to:"/drivers"},{_tag:"CSidebarNavItem",name:"Host's Working Provinces",icon:"cil-location-pin",permission:[j.d.HOST],to:"/host-details"},{_tag:"CSidebarNavTitle",_children:["Airport services"]},{_tag:"CSidebarNavDropdown",name:"Requests",icon:"cil-airplane-mode",permission:[j.d.AGENCY,j.d.HOST],_children:[{_tag:"CSidebarNavItem",name:"List Requests",to:"/requests",permission:[j.d.AGENCY,j.d.HOST]},{_tag:"CSidebarNavItem",name:"Create Request",to:"/requests/create",permission:[j.d.AGENCY]}]},{_tag:"CSidebarNavDropdown",name:"Contracts",icon:"cil-car-alt",permission:[j.d.AGENCY,j.d.HOST],_children:[{_tag:"CSidebarNavItem",name:"List Contracts",to:"/contracts",permission:[j.d.AGENCY,j.d.HOST]}]},{_tag:"CSidebarNavDropdown",name:"Transactions",icon:"cil-cash",permission:[j.d.ADMIN],_children:[{_tag:"CSidebarNavItem",name:"List Requests' Transaction",to:"/transactions/requests",permission:[j.d.ADMIN]},{_tag:"CSidebarNavItem",name:"List Drivers' Transaction",to:"/transactions/drivers",permission:[j.d.ADMIN]}]}],Y=t(864),R=t(832),U=t(868);n.default=function(e){var n=Object(p.c)((function(e){return e.user})),t=[],c=[];return Object(a.useEffect)((function(){Y.a.getInstance(n.data._id,n.data.role).on("notification",(function(e){R.a.success({message:"Notification",description:"".concat(e.message),placement:"bottomRight",duration:1.5})}))}),[]),!n||U.isEmpty(n.data)?Object(o.jsx)(r.a,{to:"/login"}):(t=Object(P.b)(k,n.data.role),c=Object(P.a)(z,n.data.role),Object(o.jsxs)("div",{className:"c-app c-default-layout",children:[Object(o.jsx)(L,{navigation:c}),Object(o.jsxs)("div",{className:"c-wrapper",children:[Object(o.jsx)(A,{}),Object(o.jsx)("div",{className:"c-body",children:Object(o.jsx)(u,{routes:t})}),Object(o.jsx)(b,{})]})]}))}},736:function(e,n,t){"use strict";t.d(n,"b",(function(){return s})),t.d(n,"a",(function(){return r})),t.d(n,"d",(function(){return i})),t.d(n,"c",(function(){return o}));var a=t(22),c=Object(a.b)();function s(e,n){var t=[];return e.forEach((function(e){e.permission?e.permission.includes(n)&&t.push(e):t.push(e)})),t}function r(e,n){var t=[];return e.forEach((function(e){e.permission?e.permission.includes(n)&&(e._children&&e._children.forEach((function(t,a){t.permission&&!t.permission.includes(n)&&e._children.splice(a,1)})),t.push(e)):(e._children&&e._children.forEach((function(t,a){t.permission&&!t.permission.includes(n)&&e._children.splice(a,1)})),t.push(e))})),t}function i(e){var n={avatar:e.avatar,language:e.language,username:e.username,role:e.role,email:e.email,phone:e.phone,_id:e._id};localStorage.setItem("".concat("ddsb","_user"),JSON.stringify(n))}function o(e){c.post("".concat("https://airport-car-booking-vdmtb.ondigitalocean.app","/api/users/token"),{refresh_token:localStorage.getItem("".concat("ddsb","_refresh_token"))}).then((function(n){localStorage.setItem("".concat("ddsb","_access_token"),n.data.access_token),e()})).catch((function(e){e.response&&(401!==e.response.status&&403!==e.response.status||(localStorage.removeItem("".concat("ddsb","_user")),localStorage.removeItem("".concat("ddsb","_access_token")),localStorage.removeItem("".concat("ddsb","_refresh_token")),window.location.href="/login"))}))}},851:function(e,n,t){"use strict";t.d(n,"b",(function(){return l})),t.d(n,"a",(function(){return u})),t.d(n,"c",(function(){return m}));var a=t(83),c=t.n(a),s=t(132),r=t(22),i=t(78),o=t.n(i),d=t(736);function l(e){return function(){var n=Object(s.a)(c.a.mark((function n(t,a){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.a.post("".concat("https://airport-car-booking-vdmtb.ondigitalocean.app","/api/users/login"),e).then((function(e){localStorage.setItem("".concat("ddsb","_access_token"),e.data.access_token),localStorage.setItem("".concat("ddsb","_refresh_token"),e.data.refresh_token),t({type:r.a.LOGIN_SUCCESS,payload:{user:e.data,message:""}})})).catch((function(e){e.response&&t({type:r.a.LOGIN_FAIL,payload:{message:e.response.data.message}})}));case 2:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}function u(e,n){return function(){var t=Object(s.a)(c.a.mark((function t(a,s){var i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=Object(r.b)(),t.next=3,i.get("".concat("https://airport-car-booking-vdmtb.ondigitalocean.app","/api/language?lang=").concat(e)).then((function(e){a({type:r.a.CHANGE_LANGUAGE_SUCCESS,payload:{language:e.data.language,message:""}})})).catch((function(t){t.response&&(403===t.response.status?Object(d.c)(u(e,n)):a({type:r.a.CHANGE_LANGUAGE_FAIL,payload:{message:t.response.data.message}}))}));case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}function m(e){return function(){var e=Object(s.a)(c.a.mark((function e(n,t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(r.b)(),e.next=3,a.post("/users/logout").then((function(e){localStorage.removeItem("".concat("ddsb","_user")),localStorage.removeItem("".concat("ddsb","_access_token")),localStorage.removeItem("".concat("ddsb","_refresh_token")),n({type:r.a.LOGOUT_SUCCESS})})).catch((function(e){e.response&&n({type:r.a.LOGOUT_FAIL})}));case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()}t(189).config()},864:function(e,n,t){"use strict";var a=t(978),c=function(){var e;return{init:function(n,t){return e=new a.io("https://airport-car-booking-vdmtb.ondigitalocean.app",{query:{_id:n,role:t}})},getInstance:function(n,t){return e||this.init(n,t),e},clearInstance:function(){e=null}}}();n.a=c}}]);
//# sourceMappingURL=24.61e906e2.chunk.js.map